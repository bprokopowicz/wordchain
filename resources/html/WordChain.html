<!DOCTYPE html>
<html>
<head>
<script>
class WordChainDict {
    constructor() {
        this.loadDict();  
    }

    async fetchText(filePath) {
        let response = await fetch(filePath);
        console.log("response: ",response.status, response.statusText); // 200 OK
        let data = await response.text();
        return data;
    }

    async loadDict() {
        let wordFileText = await this.fetchText("http://localhost:8000/dict/WordFreq38807");
        let wordList = wordFileText.split("\n");
        wordList.pop();
        this.wordSet = new Set(wordList);
        console.log(this.wordSet.size);
    }

    isWord() {
        let theWordElement = document.getElementById("theWord");
        let theWord = theWordElement.value;
        let result = this.wordSet.has(theWord);

        let theAnswerElement = document.getElementById("answer");
        theAnswerElement.innerHTML = (
            result
                ? `Yes, '${theWord}' is a word!` 
                : `Sorry, '${theWord}' is not a word.`
                );
    }
};

var dictionary = new WordChainDict();
</script>
</head>

<body>
<h2>WordChain</h2>

<!--
<script>
const input = document.createElement("input");
input.setAttribute("type", "text");
input.setAttribute("id", "theWord");
document.body.appendChild(input);
</script>
-->

<input type="text" id="theWord">
<button type="button" onclick="dictionary.isWord()">Is it a word?</button>
<p></p>
<label id="answer">Click the button to find out!</label>

<!--
<script>
const label = document.createElement("label");
label.setAttribute("id", "answer"); 
label.innerHTML = "Click the button to find out!";
document.body.appendChild(label);
</script>
-->

</body>
</html> 

